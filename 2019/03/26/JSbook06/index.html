<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://thinkerchan.com">
  
  <title>JSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-06-é¢å‘å¯¹è±¡ | æµ‹è¯•ç‹—</title>
  <meta name="author" content="æµ‹è¯•ç‹—">
  
  <meta name="description" content="ğŸ¶">
  
  
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

  <meta property="og:title" content="JSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-06-é¢å‘å¯¹è±¡"/>
  <meta property="og:site_name" content="æµ‹è¯•ç‹—"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="alternate" href="/atom.xml" title="æµ‹è¯•ç‹—" type="application/atom+xml">

  <link rel="preload" as="style" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">
  <link href="https://unpkg.com" rel="dns-prefetch" />
  <link href="https://busuanzi.ibruce.info" rel="dns-prefetch" />
  <link href="https://cdn1.lncld.net" rel="dns-prefetch" />
  
  <link href="https://xpjzs0ff.api.lncld.net" rel="dns-prefetch" />
  
</head>

<body>
  <div class="container">
    <div class="left-col" style="background-image:url('https://tva1.sinaimg.cn/large/007S8ZIlly1giq5k8ty3tj306y0zkdix.jpg')">
      <div class="intrude-less">
        <header id="header" class="inner">
          <a href="/">
            <div class="profilepic"><img class="avatar" src='https://tva1.sinaimg.cn/large/007S8ZIlly1giq5t0agwnj30bf0b4jrk.jpg'></div>
          </a>
          <div class="author-name"><a href="/">æµ‹è¯•ç‹—</a></div>
          <p class="aboutme">ğŸ¶</p>
          <nav id="main-nav">
            <ul class="main">
              
              <li>
                
                  <a href="/archives">å½’æ¡£</a>
                
              </li>
              
              <li>
                
                  <a href="/categories">ä¸“é¢˜</a>
                
              </li>
              
              <li>
                
                  <a href="/friendlinks">å‹é“¾</a>
                
              </li>
              
              <li>
                
                  <a href="/life">å…³äº</a>
                
              </li>
              
              <li>
                
                  <a href="/search">æœç´¢</a>
                
              </li>
              
            </ul>
          </nav>
          <nav id="sub-nav">
            <div class="social">
              
              <a class="twitter" href="https://twitter.com/thinkerchan" title="Twitter">Twitter</a>
              
              
              
              <a class="github" href="https://github.com/thinkerchan" title="Github">Github</a>
              
              
              <a class="yuque" href="https://yuque.com/testdog" title="è¯­é›€">è¯­é›€</a>
              

              
              <a class="rss" href="/atom.xml" title="RSS">RSS</a>
              
            </div>
          </nav>
        </header>
      </div>
    </div>
    <div class="mid-col">
      <div class="mid-col-container">
        <div id="content" class="inner">
          <article class="post">

  
    <div class="meta">
      
<div class="date">

<time datetime="2019-03-26T14:37:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  2019-03-26
</time>





</div>

    </div>
  
  <h1 class="title" itemprop="name">JSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-06-é¢å‘å¯¹è±¡</h1>
  <div class="entry-content" itemprop="articleBody">
    
    <div class="post-toc">
      <div class="toc-title">TOC</div>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç†è§£å¯¹è±¡"><span class="toc-number">1.</span> <span class="toc-text">ç†è§£å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å±æ€§ç±»å‹"><span class="toc-number">1.1.</span> <span class="toc-text">å±æ€§ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®šä¹‰å¤šä¸ªå±æ€§"><span class="toc-number">1.2.</span> <span class="toc-text">å®šä¹‰å¤šä¸ªå±æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¯»å–å±æ€§çš„ç‰¹æ€§"><span class="toc-number">1.3.</span> <span class="toc-text">è¯»å–å±æ€§çš„ç‰¹æ€§</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆ›å»ºå¯¹è±¡"><span class="toc-number">2.</span> <span class="toc-text">åˆ›å»ºå¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å·¥å‚æ¨¡å¼"><span class="toc-number">2.1.</span> <span class="toc-text">å·¥å‚æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„é€ å‡½æ•°æ¨¡å¼"><span class="toc-number">2.2.</span> <span class="toc-text">æ„é€ å‡½æ•°æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åŸå‹æ¨¡å¼"><span class="toc-number">2.3.</span> <span class="toc-text">åŸå‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ„é€ å‡½æ•°-åŸå‹æ¨¡å¼"><span class="toc-number">2.4.</span> <span class="toc-text">æ„é€ å‡½æ•°+åŸå‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åŠ¨æ€åŸå‹æ¨¡å¼"><span class="toc-number">2.5.</span> <span class="toc-text">åŠ¨æ€åŸå‹æ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯„ç”Ÿæ„é€ å‡½æ•°"><span class="toc-number">2.6.</span> <span class="toc-text">å¯„ç”Ÿæ„é€ å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¨³å¦¥æ„é€ å‡½æ•°"><span class="toc-number">2.7.</span> <span class="toc-text">ç¨³å¦¥æ„é€ å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»§æ‰¿"><span class="toc-number">3.</span> <span class="toc-text">ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åŸå‹é“¾"><span class="toc-number">3.1.</span> <span class="toc-text">åŸå‹é“¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å€Ÿç”¨æ„é€ å‡½æ•°"><span class="toc-number">3.2.</span> <span class="toc-text">å€Ÿç”¨æ„é€ å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç»„åˆç»§æ‰¿"><span class="toc-number">3.3.</span> <span class="toc-text">ç»„åˆç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åŸå‹å¼ç»§æ‰¿"><span class="toc-number">3.4.</span> <span class="toc-text">åŸå‹å¼ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯„ç”Ÿå¼ç»§æ‰¿"><span class="toc-number">3.5.</span> <span class="toc-text">å¯„ç”Ÿå¼ç»§æ‰¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯„ç”Ÿç»„åˆç»§æ‰¿"><span class="toc-number">3.6.</span> <span class="toc-text">å¯„ç”Ÿç»„åˆç»§æ‰¿</span></a></li></ol></li></ol>
    </div>
    
    <h2 id="ç†è§£å¯¹è±¡"><a href="#ç†è§£å¯¹è±¡" class="headerlink" title="ç†è§£å¯¹è±¡"></a>ç†è§£å¯¹è±¡</h2><p>ç¬¬äº”è®²é‡Œé¢è®²äº†å¯¹è±¡å£°æ˜çš„ä¸¤ç§æ–¹å¼: </p>
<ul>
<li>ä½¿ç”¨Objectæ„é€ å‡½æ•°</li>
<li>å¯¹è±¡å­—é¢é‡</li>
</ul>
<h3 id="å±æ€§ç±»å‹"><a href="#å±æ€§ç±»å‹" class="headerlink" title="å±æ€§ç±»å‹"></a>å±æ€§ç±»å‹</h3><p>ES5æè¿°å¯¹è±¡<strong>å±æ€§</strong>(property)çš„ç‰¹å¾, ç§°ä¸º<strong>ç‰¹æ€§</strong>(attribute), å®šä¹‰ç‰¹æ€§æ˜¯ä¸ºäº†å®ç°jså¼•æ“ç”¨çš„, æ‰€ä»¥åœ¨JSä¸­ä¸èƒ½ç›´æ¥è®¿é—®å®ƒä»¬(<strong>ç‰¹æ€§</strong>). ä¸ºäº†è¡¨ç¤º<strong>ç‰¹æ€§</strong>æ˜¯å†…éƒ¨å€¼, è§„èŒƒæŠŠå®ƒä»¬æ”¾åœ¨ä¸¤ä¸ªæ–¹æ‹¬å·ä¹‹ä¸­.</p>
<p>ES5æœ‰ä¸¤ç§å±æ€§:</p>
<p><strong>1. æ•°æ®å±æ€§</strong>:</p>
<p>æ•°æ®å±æ€§åŒ…å«ä¸€ä¸ªæ•°æ®å€¼çš„ä½ç½®ã€‚åœ¨è¿™ä¸ªä½ç½®å¯ä»¥è¯»å–å’Œå†™å…¥å€¼ã€‚æ•°æ®å±æ€§æœ‰ 4 ä¸ªæè¿°å…¶è¡Œä¸ºçš„ç‰¹æ€§ã€‚</p>
<ul>
<li>[[Configurable]]: è¡¨ç¤ºèƒ½å¦é€šè¿‡ delete åˆ é™¤å±æ€§ä»è€Œé‡æ–°å®šä¹‰å±æ€§ï¼Œèƒ½å¦ä¿®æ”¹å±æ€§çš„ç‰¹æ€§ï¼Œæˆ–è€…èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ã€‚é»˜è®¤å€¼: true</li>
<li>[[Enumerable]]: å¯æšä¸¾, å³èƒ½å¦for-inå¾ªç¯å‡ºè¿™ä¸ªå±æ€§, é»˜è®¤å€¼: true</li>
<li>[[Writable]]: æ˜¯å¦èƒ½æ”¹å±æ€§çš„å€¼, é»˜è®¤å€¼:true</li>
<li>[[Value]]: é»˜è®¤å€¼: undefined</li>
</ul>
<p>ä¸ºäº†å¸®åŠ©ç†è§£, æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">va person = &#123;&#125;; </span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"name"</span>, &#123;</span><br><span class="line">  writable: <span class="literal">false</span>, </span><br><span class="line">  value: <span class="string">"Nicholas"</span>,</span><br><span class="line">  configurable: <span class="literal">false</span>,  <span class="comment">//ç¦æ­¢åˆ é™¤</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„è¿™ä¸ªé…ç½®åªèƒ½ç”¨ä¸€æ¬¡,å¦åˆ™ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">"name"</span>, &#123;</span><br><span class="line">    writable: <span class="literal">true</span>, <span class="comment">// Cannot redefine property:</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">alert(person.name); <span class="comment">//"Nicholas" </span></span><br><span class="line">person.name = <span class="string">"Greg"</span>; <span class="comment">//éä¸¥æ ¼æ¨¡å¼ä¸‹èµ‹å€¼è¢«å¿½ç•¥, ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™</span></span><br><span class="line">alert(person.name);  <span class="comment">//"Nicholas"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> person.name; <span class="comment">//ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™</span></span><br><span class="line">alert(person.name);  <span class="comment">//"Nicholas"</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœ<strong>è¿è¡ŒObject.definePropertyæ–¹æ³•æ—¶</strong>, ä¸æ˜ç¡®æŒ‡å®šçš„è¯, configurable, enumerable, writableçš„å€¼éƒ½ä¼šå˜æˆ<strong>false</strong>(è¦è®°ä½åŸæœ¬ä»–ä»¬éƒ½æ˜¯true).</p>
<blockquote>
<p>æ³¨æ„: ç¬”è€…å†™æœ¬æ–‡çš„æ—¶å€™(2019å¹´), äº²è‡ªå†™ç¤ºä¾‹æµ‹è¯•, ä¹¦ä¸Šçš„è¿™éƒ¨åˆ†è¯å·²ç»ä¸å¯ä¿¡.</p>
</blockquote>
<p><strong> 2. è®¿é—®å™¨å±æ€§</strong></p>
<p>è®¿é—®å™¨å±æ€§ä¸åŒ…å«æ•°æ®å€¼ï¼›å®ƒä»¬åŒ…å«ä¸€å¯¹å„¿ getter å’Œ setter å‡½æ•°ï¼ˆä¸è¿‡ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¸æ˜¯å¿…éœ€çš„ï¼‰ã€‚åœ¨è¯»å–è®¿é—®å™¨å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨ getter å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£è¿”å›æœ‰æ•ˆçš„å€¼ï¼›åœ¨å†™å…¥è®¿é—®å™¨å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨<br>setter å‡½æ•°å¹¶ä¼ å…¥æ–°å€¼ï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£å†³å®šå¦‚ä½•å¤„ç†æ•°æ®ã€‚è®¿é—®å™¨å±æ€§æœ‰å¦‚ä¸‹ 4 ä¸ªç‰¹æ€§:</p>
<ul>
<li>[[Configurable]]:åŒæ•°æ®å±æ€§</li>
<li>[[Enumerable]]: åŒæ•°æ®å±æ€§</li>
<li>[[Get]]: è¯»å–å±æ€§æ—¶å€™è°ƒç”¨çš„å‡½æ•°, é»˜è®¤undefined </li>
<li>[[Set]]: å†™å…¥å±æ€§æ—¶å€™è°ƒç”¨çš„å‡½æ•°, é»˜è®¤undefined </li>
</ul>
<p>è¦ä¿®æ”¹è®¿é—®å™¨å±æ€§çš„ç‰¹æ€§, åŒæ ·æ˜¯ç”¨Object.definePropertyæ–¹æ³•</p>
<p>æˆ‘ä»¬çœ‹è¿™ä¸ªä¾‹å­:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(demo, <span class="string">'name'</span>, &#123;</span><br><span class="line">  configurable:<span class="literal">true</span>,</span><br><span class="line">  enumerable:<span class="literal">true</span>,</span><br><span class="line">  get:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æˆ‘è¯»å–äº†å±æ€§'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  set:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æˆ‘è®¾ç½®äº†å±æ€§'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="å®šä¹‰å¤šä¸ªå±æ€§"><a href="#å®šä¹‰å¤šä¸ªå±æ€§" class="headerlink" title="å®šä¹‰å¤šä¸ªå±æ€§"></a>å®šä¹‰å¤šä¸ªå±æ€§</h3><p>å®šä¹‰å¤šä¸ªå±æ€§å¯ä»¥ç”¨Object.definePropertiesæ–¹æ³•, ç”¨æ³•å’ŒObject.definePropertyç±»ä¼¼, åªä¸è¿‡ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤åˆå¯¹è±¡</p>
<h3 id="è¯»å–å±æ€§çš„ç‰¹æ€§"><a href="#è¯»å–å±æ€§çš„ç‰¹æ€§" class="headerlink" title="è¯»å–å±æ€§çš„ç‰¹æ€§"></a>è¯»å–å±æ€§çš„ç‰¹æ€§</h3><p>ç”¨Object.getOwnPropertyDescriptorè¯»å–å±æ€§çš„ç‰¹æ€§</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(book, &#123;</span><br><span class="line">  _year: &#123;</span><br><span class="line">    value: <span class="number">2004</span></span><br><span class="line">  &#125;,</span><br><span class="line">  edition: &#123;</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  year: &#123;</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>._year;</span><br><span class="line">    &#125;,</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>)</span>&#123; </span><br><span class="line">      <span class="keyword">if</span> (newValue &gt; <span class="number">2004</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>._year = newValue;</span><br><span class="line">        <span class="keyword">this</span>.edition += newValue - <span class="number">2004</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(book, <span class="string">"_year"</span>); </span><br><span class="line">alert(descriptor.value); <span class="comment">//2004 </span></span><br><span class="line">alert(descriptor.configurable); <span class="comment">//false</span></span><br><span class="line">alert(<span class="keyword">typeof</span> descriptor.get); <span class="comment">//"undefined"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(book, <span class="string">"year"</span>); </span><br><span class="line">alert(descriptor.value);  <span class="comment">//undefined </span></span><br><span class="line">alert(descriptor.enumerable); <span class="comment">//false</span></span><br><span class="line">alert(<span class="keyword">typeof</span> descriptor.get); <span class="comment">//"function"</span></span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h2><p>ä¸ºäº†è§£å†³å¤šæ¬¡ç”Ÿæˆå¯¹è±¡çš„é—®é¢˜, å½¢æˆäº†ä»¥ä¸‹å¸¸è§çš„æ¥ç§å°è£…æ¨¡å¼</p>
<h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createPerson</span>(<span class="params">name, age, job</span>)</span>&#123; </span><br><span class="line">  <span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">  o.name = name; </span><br><span class="line">  o.age = age;</span><br><span class="line">  o.job = job;</span><br><span class="line">  o.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = createPerson(<span class="string">"Nicholas"</span>, <span class="number">29</span>, <span class="string">"Software Engineer"</span>); </span><br><span class="line"><span class="keyword">var</span> person2 = createPerson(<span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);</span><br></pre></td></tr></table></figure>
<p>å·¥å‚æ¨¡å¼è§£å†³äº†ç”Ÿæˆå¤šä¸ªç±»ä¼¼å¯¹è±¡çš„é—®é¢˜, ä½†æ˜¯è¿˜æ²¡æœ‰è§£å†³å¯¹è±¡å±äºä»€ä¹ˆâ€ç±»â€çš„é—®é¢˜</p>
<h3 id="æ„é€ å‡½æ•°æ¨¡å¼"><a href="#æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="æ„é€ å‡½æ•°æ¨¡å¼"></a>æ„é€ å‡½æ•°æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age; </span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">  <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"Nicholas"</span>, <span class="number">29</span>, <span class="string">"Software Engineer"</span>); </span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é€šå¸¸æŠŠæ„é€ å‡½æ•°çš„å‡½æ•°åé¦–å­—æ¯å¤§å†™, è¿™æ ·å®ƒçœ‹èµ·æ¥æƒ³ä¸€ä¸ªâ€ç±»â€, åŒºåˆ«äºå·¥å‚æ¨¡å¼, æ„é€ å‡½æ•°æ¨¡å¼æœ‰ä¸‰ä¸ªä¸åŒç‚¹:</p>
<ul>
<li>æ²¡æœ‰æ˜¾ç¤ºåœ°åˆ›å»ºå¯¹è±¡</li>
<li>ç›´æ¥å°†æ•°å­¦å’Œæ–¹æ³•èµ‹ç»™this</li>
<li>æ²¡æœ‰return</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªå®ä¾‹çš„æ–¹å¼å˜æˆäº† new Person, èƒŒåäº§ç”Ÿäº†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li>
<li>å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤ this å°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ï¼›</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ï¼›</li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ul>
<hr>
<p><strong>æ„é€ å‡½æ•°çš„ä¼˜ç‚¹:</strong></p>
<p>æ„é€ å‡½æ•°çš„å¥½å¤„åœ¨äº, å®ƒå¯ä»¥ä½œä¸ºä¸€ç§è‡ªå®šä¹‰çš„â€ç±»â€, ä¹Ÿå®¹æ˜“è¯†åˆ«å®ä¾‹æ˜¯å¦ä¸ºæŸä¸€ç§ç±»å‹:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">alert(person1.constructor == Person); <span class="comment">//true</span></span><br><span class="line">alert(person2.constructor == Person); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„, åˆ›å»ºPersonçš„å®ä¾‹çš„æ—¶å€™å¿…é¡»ç”¨newå…³é”®å­—, å¦åˆ™åˆ›å»ºçš„ç¤ºä¾‹ä¼šæŒ‚è½½åˆ°windowä¸Š.</p>
<hr>
<p><strong>æ„é€ å‡½æ•°çš„ç¼ºç‚¹:</strong></p>
<p>è¿˜æ˜¯ç”¨ä¸Šä¸€ä¸ªä¾‹å­, ä½†æ˜¯æˆ‘ä»¬ç¨ä½œä¿®æ”¹:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age; </span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">  <span class="keyword">this</span>.sayName = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'alert(this.name)'</span>); <span class="comment">//ä¸ºäº†æ–¹ä¾¿ç†è§£æˆ‘ä»¬ä½¿ç”¨new Function</span></span><br><span class="line">  <span class="comment">//è¿™æ ·æ¯æ¬¡åˆ›å»ºPersonå®ä¾‹çš„æ—¶å€™, sayNameéƒ½æ˜¯é‡å¤åˆ›å»ºå…·æœ‰ä¸€æ ·åŠŸèƒ½çš„æ–¹æ³•(å³èµ„æºæµªè´¹)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'k'</span>,<span class="number">18</span>,<span class="string">'fe'</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'x'</span>,<span class="number">19</span>,<span class="string">'bd'</span>);</span><br><span class="line">p1.sayName == p2.sayName; <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<hr>
<p>å‰é¢æˆ‘çŸ¥é“äº†å‡½æ•°åå…¶å®å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆ, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç¨å¾®æ”¹é€ ä¸€ä¸‹:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, job</span>)</span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age; </span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">  <span class="keyword">this</span>.sayName = sayName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'k'</span>,<span class="number">18</span>,<span class="string">'fe'</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'x'</span>,<span class="number">19</span>,<span class="string">'bd'</span>);</span><br><span class="line">p1.sayName == p2.sayName; <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·, çœ‹èµ·æ¥ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜äº†. ä¸è¿‡sayNameä½œä¸ºä¸€ä¸ªå…¨å±€å‡½æ•°, åªèƒ½ç»™Personçš„ç¤ºä¾‹è°ƒç”¨, å¥½åƒåˆå¯¹ä¸èµ·å®ƒä½œä¸ºå…¨å±€å‡½æ•°çš„ç§°å·, å¦‚æœè¦å®šä¹‰å¾ˆå¤šä¸ªæ–¹æ³•, é‚£å°±éœ€è¦å¾ˆå¤šä¸ªå…¨å±€å‡½æ•°, è¿™æ ·çœ‹èµ·æ¥åˆä¸åƒâ€å°è£…å¥½â€çš„æ ·å­.</p>
<h3 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h3><p>ä¸ºäº†è§£å†³æ„é€ å‡½æ•°æ¨¡å¼çš„é—®é¢˜, è¯ç”Ÿäº†åŸå‹æ¨¡å¼, ç¬¬äº”ç« æˆ‘ä»¬æåˆ°äº†Functionçš„æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸¤ä¸ªå±æ€§, ä¸€ä¸ªæ˜¯<code>length</code>, å¦ä¸€ä¸ªæ˜¯<code>prototype</code>, æˆ‘ä»¬ç°åœ¨æ¥ç€é‡è®²è¿™ä¸ª<code>prototype</code>. <code>prototype</code>å…¶å®æ˜¯ä¸€ä¸ªæŒ‡é’ˆ, æŒ‡å‘ä¸€ä¸ª<code>å¯¹è±¡</code>, è¿™ä¸ªå¯¹è±¡ç”¨äº<strong>å­˜å‚¨æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•</strong>.</p>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸€å¼ å›¾:</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1g1gdt138bpj30cw070mx5.jpg" alt="demo.prototype"></p>
<p>å¯ä»¥çœ‹åˆ°æˆ‘éšä¾¿åˆ›é€ çš„ä¸€ä¸ªç©ºå‡½æ•°demo, å®ƒçš„prototypeæŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡, è¿™ä¸ªå¯¹è±¡åŒ…å«äº†<code>constructor</code>å’Œ<code>__proto__</code>ä¸¤ä¸ªå±æ€§, è€Œ<br><code>constructor</code>åˆæŒ‡å›äº†demoæœ¬èº«, <code>__proto__</code>æŒ‡å‘çš„æ˜¯Object, å®é™…ä¸Šè¿™ä¸ªObject, å°±æ˜¯æˆ‘ä»¬å¸¸å¸¸çœ‹åˆ°çš„ new Objecté‡Œé¢çš„é‚£ä¸ªObjectæ„é€ å‡½æ•°, è¿™ä¾§é¢åæ˜ äº†å‡ ä¸ªäº‹å®:</p>
<ul>
<li>æ‰€æœ‰<strong>å¯¹è±¡</strong>éƒ½æ˜¯Objectçš„å®ä¾‹(è¿™ä¸ªè®²åŸå‹é“¾çš„æ—¶å€™ä¼šç»§ç»­æ·±å…¥è®²è§£)</li>
<li>ä¸€ä¸ª<strong>å¯¹è±¡</strong>å¯ä»¥é€šè¿‡<code>__proto__</code>è®¿é—®<strong>ç”Ÿæˆè¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°</strong> çš„ <strong>åŸå‹</strong></li>
<li>åŸå‹(prototype)çš„<code>constructor</code>å±æ€§,æŒ‡å‘çš„æ˜¯æ„é€ å‡½æ•°æœ¬èº«</li>
</ul>
<hr>
<p>æˆ‘ä»¬å†çœ‹è¿™ä¸ªä¾‹å­:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123; &#125;</span><br><span class="line">Person.prototype.name = <span class="string">"Nicholas"</span>; </span><br><span class="line">Person.prototype.age = <span class="number">29</span>; </span><br><span class="line">Person.prototype.job = <span class="string">"Software Engineer"</span>; </span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(); </span><br><span class="line">person1.sayName();  <span class="comment">//"Nicholas"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line">person2.sayName();  <span class="comment">//"Nicholas" </span></span><br><span class="line">alert(person1.sayName == person2.sayName); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šå®ƒçš„åŸç†å¦‚ä¸‹:</p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1g1gkye1wc6j30s80bqaaj.jpg" alt="åŸç†å›¾"></p>
<p>å›¾ä¸­å®ä¾‹çš„<code>[[prototype]]</code>, å…¶å®å°±æ˜¯<code>__proto__</code>;</p>
<p>é™¤äº†ç”¨è¿™ä¸ªå±æ€§ç¡®å®šå¯¹è±¡å®ä¾‹å’ŒåŸå‹çš„å…³ç³», è¿˜å¯ä»¥é€šè¿‡ä¸‹åˆ—æ–¹å¼æŸ¥çœ‹:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Person.prototype.isPrototypeOf(person1) <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(person1) == Person.prototype <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>å‰é¢ç»™å‡ºçš„ä¾‹å­, æ„é€ å‡½æ•°éƒ½æ˜¯ä¸€ä¸ªç©ºå‡½æ•°, ä¸å­˜åœ¨ä»»ä½•çš„å±æ€§å’Œæ–¹æ³•. åŸºäºä¸Šä¸€ä¸ªä»£ç ç¤ºä¾‹, æˆ‘ä»¬å°è¯•é€šè¿‡å®ä¾‹é‡å†™åŸå‹çš„å±æ€§.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">alert(person1.name);  <span class="comment">// "Nicholas"</span></span><br><span class="line">person1.name = <span class="string">"kkk"</span>;   <span class="comment">//æ³¨æ„æˆ‘è¿™é‡Œåªæ˜¯æ”¹äº†å®ä¾‹çš„å±æ€§, å¹¶æ²¡æœ‰æ”¹æ„é€ å‡½æ•°</span></span><br><span class="line">alert(person1.name);  <span class="comment">//"kkk"</span></span><br><span class="line">alert(person2.name);  <span class="comment">// "Nicholas"</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡º, é€šè¿‡å®ä¾‹å»æ”¹å˜åŸå‹, æ˜¯æ²¡åŠæ³•åœ¨åŸå‹ä¸­æ”¹å˜å¯¹åº”çš„å±æ€§æˆ–è€…æ–¹æ³•.</p>
<p>ä»ä¸Šé¢çš„ä»£ç èƒ½<strong>åæ˜ </strong>å‡º, å¯¹è±¡å®ä¾‹æŸ¥æ‰¾æŸä¸€ä¸ªå±æ€§(æˆ–è€…æ–¹æ³•), æ˜¯å…ˆæŸ¥æ‰¾æ„é€ å‡½æ•°ä¸­çš„åŒåå±æ€§ , å¦‚æœæ‰¾åˆ°åˆ™åœæ­¢, å¦åˆ™ç»§ç»­åœ¨åŸå‹ä¸­æŸ¥æ‰¾åŒåå±æ€§.</p>
<blockquote>
<p>è§£é‡Š: ä¸Šé¢çš„ä»£ç æ˜¯æ˜¾å¼åœ°person1.name = â€œkkkâ€. å‡å¦‚æ„é€ å‡½æ•°ä¸­å­˜åœ¨this.name=â€kkkâ€, é‚£ä¹ˆperson1.nameçš„å€¼æ¯«æ— ç–‘é—®å°±æ˜¯â€kkkâ€;</p>
</blockquote>
<p>ç”±äºæ„é€ å‡½æ•°å’ŒåŸå‹çš„è¿™ç§ç‰¹æ€§, æˆ‘ä»¬è¦æŸ¥æ‰¾ä¸€ä¸ªå¯¹è±¡å®ä¾‹çš„å±æ€§ç©¶ç«Ÿ<strong>æ¥è‡ªè‡ªèº«</strong>è¿˜æ˜¯<strong>æ¥è‡ªåŸå‹</strong>, éœ€è¦ç”¨hasOwnPropertyæ–¹æ³•:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">alert(person1.hasOwnProperty(<span class="string">'name'</span>));  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<hr>
<p><code>in</code>:<br>é€šå¸¸æˆ‘ä»¬ä¼šåœ¨for-in(å½“ç„¶ES5å¯ä»¥ç”¨Object.keys)ä¸­çœ‹åˆ°inæ“ä½œç¬¦, ç”¨äºéå†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰è¯¾æšä¸¾å±æ€§, ç„¶è€Œå•ç‹¬ä½¿ç”¨inæ“ä½œç¬¦çš„æ—¶å€™, æ˜¯ç”¨äºæ£€æµ‹æŸä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§(æˆ–æ–¹æ³•)æ˜¯å¦å­˜åœ¨äºåŸå‹é“¾ä¸­. åªè¦åŸå‹ä¸­å­˜åœ¨éœ€è¦æŸ¥æ‰¾çš„å±æ€§, å‡è®¾è¿™ä¸ªå±æ€§ä¸º<code>name</code>, é‚£ä¹ˆä¸ç®¡æ„é€ å‡½æ•°æ˜¯å¦å­˜åœ¨<code>name</code>, inæ“ä½œç¬¦ä¾ç„¶èƒ½æŸ¥æ‰¾å‡ºæ¥.</p>
<p>ä¸ºäº†æŸ¥æ‰¾<strong>åªå­˜åœ¨åŸå‹ä¸Šçš„å±æ€§(æˆ–æ–¹æ³•)</strong>, æˆ‘ä»¬å¯ä»¥å°†inå’ŒhasOwnPropertyå†™æˆä¸€ä¸ªå‡½æ•°ç”¨äºæ£€æµ‹: </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasPrototypeProperty</span>(<span class="params">object, name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !object.hasOwnProperty(name) &amp;&amp; (name <span class="keyword">in</span> object);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><code>ç®€å†™åŸå‹</code>:</p>
<p>å‰é¢çš„ä»£ç å¯ä»¥çœ‹åˆ°, æ¯æ·»åŠ ä¸€ä¸ªå±æ€§, å°±è¦å¤šä¹¦å†™Person.prototypeä¸€æ¬¡, å®é™…ä¸Šä»¬å¯ä»¥è¿™æ ·:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>:Person, //æ³¨æ„è¿™é‡Œè¦æ‰‹åŠ¨ç»‘å®šæ„é€ å‡½æ•°,å› ä¸ºæ­¤æ—¶çš„åŸå‹ç›¸å½“äºä¸€ä¸ªæ–°é¢†å…»çš„å°å­©, è¦é‡æ–°è®©ä»–è®¤çˆ¹. è™½ç„¶æˆ‘ä»¬å¤§å¤šæ•°æƒ…å†µä¸‹ç”¨ä¸åˆ°<span class="keyword">constructor</span>å±æ€§, ä½†æ˜¯å»ºè®®å…»æˆè¿™ä¸ªä¹ æƒ¯</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p><code>åŸå‹çš„åŠ¨æ€</code>:</p>
<p>ç”±äºåœ¨åŸå‹ä¸­æŸ¥æ‰¾å€¼çš„è¿‡ç¨‹æ˜¯ä¸€æ¬¡æœç´¢ï¼Œå› æ­¤æˆ‘ä»¬å¯¹åŸå‹å¯¹è±¡æ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½èƒ½å¤Ÿç«‹å³ä»å®ä¾‹ä¸Šåæ˜ å‡ºæ¥ å³ä½¿æ˜¯å…ˆåˆ›å»ºäº†å®ä¾‹åä¿®æ”¹åŸå‹ä¹Ÿç…§æ ·å¦‚æ­¤ã€‚</p>
<p>è¯·çœ‹ä¾‹å­:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> friend = <span class="keyword">new</span> Person(); </span><br><span class="line">Person.prototype.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">"hi"</span>);</span><br><span class="line">&#125;;</span><br><span class="line">friend.sayHi(); <span class="comment">//"hi"ï¼ˆæ²¡æœ‰é—®é¢˜ï¼ï¼‰</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœç”Ÿæˆå®ä¾‹ä¹‹åç”¨å­—é¢é‡çš„å½¢å¼ä¿®æ”¹äº†åŸå‹å¯¹è±¡, é‚£ä¹ˆå°±ä¼šæŠ¥é”™:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> friend = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123; </span><br><span class="line">  <span class="keyword">constructor</span>: Person, </span><br><span class="line">  name : "Nicholas", </span><br><span class="line">  age : 29,</span><br><span class="line">  job : "Software Engineer", </span><br><span class="line">  sayName : function () &#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">friend.sayName(); <span class="comment">//error. å› ä¸ºfriendæ˜¯åŸæœ¬é‚£ä¸ªåŸå‹è¡ç”Ÿè€Œæ¥çš„</span></span><br></pre></td></tr></table></figure>
<hr>
<p>åŸç”Ÿå¯¹è±¡çš„åŸå‹: Array, Object, FunctionåŒæ ·å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹å¼ä¿®æ”¹åŸå‹å¯¹è±¡, ä¸è¿‡é™¤éå¿…è¦, ä¸å»ºè®®ä¿®æ”¹.</p>
<hr>
<p>åŸå‹æ¨¡å¼çš„ç¼ºç‚¹:<br>æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½å†™åœ¨åŸå‹, çœ‹ä¸Šå»å®ç°äº†å…±äº«. ä½†æ˜¯å¦‚æœåŸå‹å¯¹è±¡ä¸­çš„å±æ€§æ˜¯å¼•ç”¨ç±»å‹çš„è¯, å®ä¾‹å¯¹æ”¹å±æ€§çš„ä¿®æ”¹, ä¹Ÿä¼šç«‹åˆ»åæ˜ åˆ°æ‰€æœ‰å®ä¾‹ä¸Š.</p>
<p>çœ‹ä¾‹å­:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123; </span><br><span class="line">  <span class="keyword">constructor</span>: Person,</span><br><span class="line">  name : "Nicholas",</span><br><span class="line">  age : 29,</span><br><span class="line">  job : "Software Engineer",</span><br><span class="line">  friends : ["Shelby","Court"],</span><br><span class="line">  sayName : function () &#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(); </span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">person1.friends.push(<span class="string">"Van"</span>);</span><br><span class="line">alert(person1.friends); <span class="comment">//"Shelby,Court,Van" </span></span><br><span class="line">alert(person2.friends);  <span class="comment">//"Shelby,Court,Van" </span></span><br><span class="line">alert(person1.friends === person2.friends); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h3 id="æ„é€ å‡½æ•°-åŸå‹æ¨¡å¼"><a href="#æ„é€ å‡½æ•°-åŸå‹æ¨¡å¼" class="headerlink" title="æ„é€ å‡½æ•°+åŸå‹æ¨¡å¼"></a>æ„é€ å‡½æ•°+åŸå‹æ¨¡å¼</h3><p>ä»…ä»…åªç”¨æ„é€ å‡½æ•°, é‚£ä¹ˆåœ¨ç”Ÿæˆå¯¹è±¡æ–¹æ³•çš„æ—¶å€™ä¼šé€ æˆèµ„æºæµªè´¹. å¦‚æœåªæ˜¯ç”¨åŸå‹æ¨¡å¼çš„è¯, é‚£ä¹ˆä¼šäº§ç”Ÿå±æ€§ä¸ºå¼•ç”¨ç±»å‹æ—¶å€™çš„å¼Šç«¯. æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸¤å¼ æ–¹å¼ç»“åˆèµ·æ¥:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age, job</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">  <span class="keyword">this</span>.friends = [<span class="string">"Shelby"</span>,<span class="string">"Court"</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123; </span><br><span class="line">  <span class="keyword">constructor</span>: Person,</span><br><span class="line">  sayName : function () &#123;</span><br><span class="line">    alert(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person(<span class="string">"Nicholas"</span>, <span class="number">29</span>, <span class="string">"Software Engineer"</span>); <span class="keyword">var</span> person2 = <span class="keyword">new</span> Person(<span class="string">"Greg"</span>, <span class="number">27</span>, <span class="string">"Doctor"</span>);</span><br><span class="line">person1.friends.push(<span class="string">"Van"</span>); </span><br><span class="line"></span><br><span class="line">alert(person1.friends); <span class="comment">//"Shelby,Count,Van"</span></span><br><span class="line">alert(person2.friends); <span class="comment">//"Shelby,Count"</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·, ç»„åˆæ¨¡å¼åŸºæœ¬è§£å†³æ‰€æœ‰çš„éœ€æ±‚.</p>
<h3 id="åŠ¨æ€åŸå‹æ¨¡å¼"><a href="#åŠ¨æ€åŸå‹æ¨¡å¼" class="headerlink" title="åŠ¨æ€åŸå‹æ¨¡å¼"></a>åŠ¨æ€åŸå‹æ¨¡å¼</h3><p>ç»„åˆæ¨¡å¼çš„ä¼˜åŒ–:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age, job</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.job = job;</span><br><span class="line">  <span class="keyword">this</span>.friends = [<span class="string">"Shelby"</span>,<span class="string">"Court"</span>],</span><br><span class="line">  <span class="comment">// çœ‹èµ·æ¥æ›´åƒæ˜¯ä¸€ä¸ª'ç±»'</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.sayName != <span class="string">"function"</span>)&#123;</span><br><span class="line">    Person.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">      alert(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¯„ç”Ÿæ„é€ å‡½æ•°"><a href="#å¯„ç”Ÿæ„é€ å‡½æ•°" class="headerlink" title="å¯„ç”Ÿæ„é€ å‡½æ•°"></a>å¯„ç”Ÿæ„é€ å‡½æ•°</h3><p>å‡å¦‚ä½ æœ‰è¿™ä¹ˆä¸€ä¸ªè¿™æ ·çš„éœ€æ±‚: æ‰¹é‡ç”Ÿäº§æŸä¸€ç§æ•°æ®ç±»å‹, æ¯”å¦‚æ•°ç»„å®ä¾‹, ä½†æ˜¯è¿™ä¸ªæ•°ç»„å®ä¾‹åˆæœ‰ä¸€ä¸ª<code>toPipedString</code>æ–¹æ³•, é‚£ä½ å¯ä»¥è€ƒè™‘ç”¨å¯„ç”Ÿæ„é€ å‡½æ•°.</p>
<p>å®ƒå’Œå·¥å‚æ¨¡å¼é•¿å¾—å¾ˆåƒ(å®é™…ä¸Šå°±æ˜¯ä¸€æ ·çš„, è¯¥æœ‰çš„ç¼ºç‚¹éƒ½æœ‰):</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_Array</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> values = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">    values.push.apply(values, <span class="built_in">arguments</span>);</span><br><span class="line">    values.toPipedString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.join(<span class="string">"|"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> values;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> _Array(<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">4</span>);</span><br><span class="line">a.toPipedString();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = _Array(<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">4</span>);<span class="comment">// è¿™é‡Œæ²¡æœ‰ç”¨new , è¿”å›çš„ç»“æœä¾æ—§ä¸€æ ·(å°±æ˜¯å·¥å‚æ¨¡å¼)</span></span><br><span class="line">b.toPipedString();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ä¸Šé¢çš„_Arrayæ„é€ å‡½æ•°, å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°this, è€Œä¸”å®ƒè¿˜æœ‰æ˜¾å¼çš„return, ä¹Ÿå°±æ˜¯è¯´newäº†ä¹Ÿæ˜¯ç™½new. è™½ç„¶ä¹¦ä¸Šç»™å‡ºäº†è¿™ä¸ªå¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼, ä½†ç¬”è€…è®¤ä¸ºå®åœ¨æ²¡æœ‰å¿…è¦ä½¿ç”¨è¿™ç§æ–¹å¼.</p>
</blockquote>
<h3 id="ç¨³å¦¥æ„é€ å‡½æ•°"><a href="#ç¨³å¦¥æ„é€ å‡½æ•°" class="headerlink" title="ç¨³å¦¥æ„é€ å‡½æ•°"></a>ç¨³å¦¥æ„é€ å‡½æ•°</h3><p>å°±æ˜¯å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ä¸‹, åªæš´éœ²æ–¹æ³•, ä¸å…è®¸é€šè¿‡å¯¹è±¡å®ä¾‹ç›´æ¥è®¿é—®å¯¹è±¡çš„å±æ€§å€¼</p>
<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>JSåªæœ‰å®ç°ç»§æ‰¿, å¹¶ä¸”ä¸»è¦ä¾é åŸå‹é“¾å®ç°çš„.</p>
<h3 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h3><p>å‰é¢æˆ‘ä»¬è®²äº†åŸå‹, è‡³äºåŸå‹é“¾. å®é™…å°±æ˜¯ç”¨çˆ¶ç±»çš„å®ä¾‹, ä½œä¸ºå­ç±»çš„åŸå‹å¯¹è±¡(å³ç”¨çˆ¶ç±»å®ä¾‹é‡å†™å­ç±»åŸå‹å¯¹è±¡), è¿™æ ·çˆ¶ç±»æ‹¥æœ‰çš„å±æ€§å’Œæ–¹æ³•, å­ç±»å®ä¾‹è‡ªç„¶ä¹Ÿèƒ½è®¿é—®åˆ°.</p>
<p>åŸå‹é“¾éœ€è¦æ³¨æ„:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.property = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.property;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.subproperty = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿äº† SuperType</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨æ„ä»¥ä¸‹æ“ä½œä¸€ç‚¹è¦åœ¨ç»§æ‰¿å®Œä¹‹åæ‰èƒ½æ‰§è¡Œ, å¹¶ä¸”ä¸èƒ½ç”¨å­—é¢é‡æ·»åŠ æ–¹æ³•, å¦åˆ™ä¼šå¯¼è‡´ç»§æ‰¿å¤±æ•ˆ.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ æ–°æ–¹æ³•</span></span><br><span class="line">SubType.prototype.getSubValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.subproperty;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//é‡å†™è¶…ç±»å‹ä¸­çš„æ–¹æ³•</span></span><br><span class="line">SubType.prototype.getSuperValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> SubType(); </span><br><span class="line">alert(instance.getSuperValue());  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>é™¤äº†ä»¥ä¸Šè¦æ³¨æ„çš„åœ°æ–¹, åŸå‹é“¾ç»§æ‰¿è¿˜æœ‰ä¸¤ä¸ªé—®é¢˜:</p>
<ul>
<li>ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯, å½“çˆ¶ç±»çš„å®ä¾‹åŒ…å«äº†å¼•ç”¨ç±»å‹å±æ€§æ—¶, å­ç±»çš„åŸå‹å¯¹è±¡å°±åŒæ ·åŒ…å«äº†è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å±æ€§.<br>æˆ‘ä»¬æ¥çœ‹ç¤ºä¾‹:</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params"></span>)</span>&#123; &#125;</span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType(); </span><br><span class="line">instance1.colors.push(<span class="string">"black"</span>); </span><br><span class="line">alert(instance1.colors);  <span class="comment">//"red,blue,green,black"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType(); </span><br><span class="line">alert(instance2.colors); <span class="comment">//"red,blue,green,black", å·²ç»å‘ç”Ÿä¿®æ”¹</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç¬¬äºŒä¸ªé—®é¢˜: ä¸èƒ½å‘çˆ¶ç±»ä¼ å‚.</li>
</ul>
<h3 id="å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°"></a>å€Ÿç”¨æ„é€ å‡½æ•°</h3><p>ä¸ºäº†è§£å†³åŸå‹é“¾ç»§æ‰¿é—®é¢˜, æˆ‘ä»¬å¯ä»¥å€Ÿç”¨çˆ¶ç±»æ„é€ å‡½æ•°, è€Œä¸æ˜¯å°†çˆ¶ç±»å®åŠ›é‡å†™å­ç±»åŸå‹å¯¹è±¡ , é€šå¸¸è¿™ç§æ–¹å¼å«åšç»å…¸ç»§æ‰¿æˆ–è€…ä¼ªé€ ç»§æ‰¿.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = name || <span class="string">'testdog'</span></span><br><span class="line">  SuperType.call(<span class="keyword">this</span>,name);  <span class="comment">//æƒ³èµ·callå’Œapplyçš„ä½œç”¨å—?</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType(); </span><br><span class="line">instance1.colors.push(<span class="string">"black"</span>); </span><br><span class="line">alert(instance1.colors); <span class="comment">//"red,blue,green,black"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType(); </span><br><span class="line">alert(instance2.colors); <span class="comment">//"red,blue,green"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> subType(<span class="string">'kkk'</span>)</span><br><span class="line">instance.name;  <span class="comment">//'kkk'</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡è¿™æ ·çš„è¯, å°±å­ç±»å®ä¾‹æ— æ³•ç”¨instanceofæ¥æ£€æŸ¥æ˜¯å¦æ˜¯ä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹äº†.</p>
<p>å½“ç„¶, ä¸å¯èƒ½æŠŠæ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ”¾åœ¨çˆ¶ç±»æ„é€ å‡½æ•°ä¸­, è‚¯å®šè¿˜æœ‰å†™åœ¨çˆ¶ç±»åŸå‹å¯¹è±¡çš„æƒ…å†µ. æ‰€ä»¥åªç”¨call/applyå€Ÿç”¨çˆ¶ç±»æ„é€ å‡½æ•°å®ç°ç»§æ‰¿, ä¹Ÿæ˜¯ä¸å¤Ÿçš„.</p>
<h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><p>é¡¾åæ€ä¹‰, åŸå‹é“¾+æ„é€ å‡½æ•°ç»„åˆè€Œæˆ.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//ç»§æ‰¿å±æ€§</span></span><br><span class="line">  SuperType.call(<span class="keyword">this</span>, name);</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»§æ‰¿æ–¹æ³•</span></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType(); </span><br><span class="line">SubType.prototype.constructor = SubType; </span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance1 = <span class="keyword">new</span> SubType(<span class="string">"Nicholas"</span>, <span class="number">29</span>); </span><br><span class="line">instance1.colors.push(<span class="string">"black"</span>); </span><br><span class="line">alert(instance1.colors); <span class="comment">//"red,blue,green,black" </span></span><br><span class="line">instance1.sayName(); <span class="comment">//"Nicholas";</span></span><br><span class="line">instance1.sayAge(); <span class="comment">//29</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance2 = <span class="keyword">new</span> SubType(<span class="string">"Greg"</span>, <span class="number">27</span>); </span><br><span class="line">alert(instance2.colors); <span class="comment">//"red,blue,green" </span></span><br><span class="line">instance2.sayName(); <span class="comment">//"Greg";</span></span><br><span class="line">instance2.sayAge(); <span class="comment">//27</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„:  åˆ›å»ºä¸€ä¸ªå­ç±»å®ä¾‹, SuperTypeå…¶å®æ˜¯è¿è¡Œäº†ä¸¤æ¬¡çš„ , ä¸€æ¬¡åœ¨äºåŸå‹é“¾ç»§æ‰¿, å¦ä¸€æ¬¡åœ¨äºå€Ÿç”¨ä»¥è¦†ç›–å¼•ç”¨ç±»å‹å±æ€§å…±äº«çš„é—®é¢˜.</p>
<h3 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h3><p>å¦‚æœåªæ˜¯åŸºäºç°æœ‰çš„å¯¹è±¡å®ç°ç»§æ‰¿, é‚£å¯ä¸æ¯”å…´å¸ˆåŠ¨ä¼—å†™é‚£ä¹ˆå¤šå‡½æ•°:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> k = &#123;</span><br><span class="line">  name:<span class="string">'k'</span>,</span><br><span class="line">  age:<span class="number">18</span>,</span><br><span class="line">  friends:[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>];</span><br><span class="line">&#125;;  </span><br><span class="line"><span class="keyword">var</span> object = <span class="function"><span class="keyword">function</span>(<span class="params">o</span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">  F.prototype = o;  <span class="comment">//æµ…å¤åˆ¶, </span></span><br><span class="line">  reutrn o;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = object(k);</span><br><span class="line">obj.friends.push(<span class="string">'d'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = object(k);</span><br><span class="line">obj2.friends; <span class="comment">//['a','b','c','d'];</span></span><br></pre></td></tr></table></figure>
<p>ES5è§„èŒƒåŒ–äº†è¿™ç§ç»§æ‰¿æ–¹å¼, äºæ˜¯æœ‰äº†Object.createæ–¹æ³•, ç”¨æ³•åŒä¸Š, ä½†æ˜¯å®ƒå¯ä»¥å¤šä¸€ä¸ªå‚æ•°.è¿™ä¸ªå‚æ•°çš„æ ¼å¼å’ŒObject.definePropertiesçš„ç¬¬äºŒä¸ªå‚æ•°æ ¼å¼ä¸€è‡´.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">"Nicholas"</span>,</span><br><span class="line">  friends: [<span class="string">"Shelby"</span>, <span class="string">"Court"</span>, <span class="string">"Van"</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> anotherPerson = <span class="built_in">Object</span>.create(person, &#123; </span><br><span class="line">  name: &#123;</span><br><span class="line">    value: <span class="string">"Greg"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">alert(anotherPerson.name); <span class="comment">//"Greg"</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h3><p>å…¶å®æ˜¯åŸå‹å¼ç»§æ‰¿çš„åŸºç¡€ä¸Šå†åŒ…è£…ä¸€å±‚, ç”¨äºæ·»åŠ éœ€è¦çš„æ–¹æ³•, ç±»ä¼¼äºå‰é¢è®²çš„å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼æˆ–è€…å·¥å‚æ¨¡å¼.</p>
<h3 id="å¯„ç”Ÿç»„åˆç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿</h3><p>å‰é¢è®²äº†ç»„åˆç»§æ‰¿, å®ƒè¿˜å­˜åœ¨ä¸€ä¸ªä¸¤æ¬¡è°ƒç”¨çˆ¶ç±»çš„é—®é¢˜. æ—¢ç„¶ç»„åˆç±»å‹æ˜¯é€šè¿‡å€Ÿç”¨çˆ¶ç±»å‡½æ•°å®ç°å±æ€§ç»§æ‰¿, é€šè¿‡åŸå‹é“¾å®ç°æ–¹æ³•çš„ç»§æ‰¿. é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨åŸå‹é“¾è¿™é‡ŒåŠ¨ä¸€æ¬¡æ‰‹è„š.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prototype = <span class="built_in">Object</span>.create(superType.prototype);</span><br><span class="line">  prototype.constructor = subType; </span><br><span class="line">  subType.prototype = prototype; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>)</span>&#123; </span><br><span class="line">  SuperType.call(<span class="keyword">this</span>, name);</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inheritPrototype(SubType, SuperType);</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  alert(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æœ¬ç« å®Œ</p>

  </div>

</article>


  <nav id="pagenavi">
    
    <a href="/2019/03/27/JSbook07/" class="prev">ä¸Šä¸€ç¯‡ï¼šJSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-07-å‡½æ•°è¡¨è¾¾å¼</a>
    
    
    <a href="/2019/03/26/JSbook05/" class="next">ä¸‹ä¸€ç¯‡ï¼šJSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-05-å¼•ç”¨ç±»å‹</a>
    
  </nav>

        </div>
        
        
          <div class="post-comments" id="Jcmt">
            <h1 class="post-comments-title">è®¿å®¢è¯„è®º</h1>
            <div id="Jcomment"></div>
          </div>
        
      </div>
      <footer id="footer" class="inner">
        Â© 2021 - æµ‹è¯•ç‹— -
        <span id="busuanzi_container_site_pv">PV <span id="busuanzi_value_site_pv"></span></span>
        <p>Powered by <a href="https://hexo.io/">Hexo</a> & <a href="https://github.com/thinkerchan/hexo-theme-greyshade">GreyShade</a></p>
      </footer>
    </div>
  </div>
  
  <script>
    let mod ={
      timePrefix:'t-',
      expire:1000*60*60,
      load:function(libName,libUrl,cb){
        let aval = (new Date).getTime() - localStorage.getItem(this.timePrefix+libName) < this.expire;
        let libStr = localStorage.getItem(libName)
        if (aval && libStr) {
          this.parseAndInsert(libStr)
          cb && cb(libStr);
        }else{
          this.ajax(libUrl,(str)=>{
            localStorage.setItem(libName, str)
            localStorage.setItem(this.timePrefix+libName, (new Date).getTime())
            this.parseAndInsert(str)
            cb && cb(str);
          })
        }
      },
      parseAndInsert(rawStr) {
        let script = document.createElement('script')
        script.innerHTML = rawStr
        document.body.appendChild(script)
      },
      ajax:function(url,cb){
        let xhr = new XMLHttpRequest;
        xhr.open('get', url, true)
        xhr.send();
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4 && xhr.status == 200) {
            cb && cb(xhr.responseText)
          }else{
            // console.log(xhr.readyState,xhr.status);
          }
        }
      },
      genCmt(){
        window.Valine && new Valine({
          el: '#Jcomment',
          appId: 'XPJzs0FfufkFfuBjbJraqhbo-gzGzoHsz',
          appKey: 'QoS0zL4Y2xTDviitGOPkvCGv',
          notify: true,
          verify: false,
          avatar: 'mm',
          pageSize: '10',
          placeholder: 'Valine+Leancloudæä¾›è¯„è®º'
        })
      }
    }

    mod.load('lib-av', 'https://cdn.jsdelivr.net/npm/leancloud-storage@3.0.1/dist/av-min.js', () => {
      mod.load('lib-cmt', 'https://unpkg.com/valine@1.4.14/dist/Valine.min.js',()=>{
        let t = setTimeout(() => {
          mod.genCmt()
          clearTimeout(t)
          t = null;
        }, 100);
      })
    })
  </script>
  
  <script async defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
  <script async defer src="https://s5.cnzz.com/z_stat.php?id=1276809529&web_id=1276809529"></script>
  
</body>
</html>