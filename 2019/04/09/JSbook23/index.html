<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://thinkerchan.com">
  
  <title>JSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-23-ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨ | æµ‹è¯•ç‹—</title>
  <meta name="author" content="æµ‹è¯•ç‹—">
  
  <meta name="description" content="ğŸ¶">
  
  
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

  <meta property="og:title" content="JSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-23-ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨"/>
  <meta property="og:site_name" content="æµ‹è¯•ç‹—"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="alternate" href="/atom.xml" title="æµ‹è¯•ç‹—" type="application/atom+xml">

  <link rel="preload" as="style" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">
  <link href="https://unpkg.com" rel="dns-prefetch" />
  <link href="https://busuanzi.ibruce.info" rel="dns-prefetch" />
  <link href="https://cdn1.lncld.net" rel="dns-prefetch" />
  
  <link href="https://xpjzs0ff.api.lncld.net" rel="dns-prefetch" />
  
</head>

<body>
  <div class="container">
    <div class="left-col" style="background-image:url('https://tva1.sinaimg.cn/large/007S8ZIlly1giq5k8ty3tj306y0zkdix.jpg')">
      <div class="intrude-less">
        <header id="header" class="inner">
          <a href="/">
            <div class="profilepic"><img class="avatar" src='https://tva1.sinaimg.cn/large/007S8ZIlly1giq5t0agwnj30bf0b4jrk.jpg'></div>
          </a>
          <div class="author-name"><a href="/">æµ‹è¯•ç‹—</a></div>
          <p class="aboutme">ğŸ¶</p>
          <nav id="main-nav">
            <ul class="main">
              
              <li>
                
                  <a href="/archives">å½’æ¡£</a>
                
              </li>
              
              <li>
                
                  <a href="/categories">ä¸“é¢˜</a>
                
              </li>
              
              <li>
                
                  <a href="/friendlinks">å‹é“¾</a>
                
              </li>
              
              <li>
                
                  <a href="/life">å…³äº</a>
                
              </li>
              
              <li>
                
                  <a href="/search">æœç´¢</a>
                
              </li>
              
            </ul>
          </nav>
          <nav id="sub-nav">
            <div class="social">
              
              <a class="twitter" href="https://twitter.com/thinkerchan" title="Twitter">Twitter</a>
              
              
              
              <a class="github" href="https://github.com/thinkerchan" title="Github">Github</a>
              
              
              <a class="yuque" href="https://yuque.com/testdog" title="è¯­é›€">è¯­é›€</a>
              

              
              <a class="rss" href="/atom.xml" title="RSS">RSS</a>
              
            </div>
          </nav>
        </header>
      </div>
    </div>
    <div class="mid-col">
      <div class="mid-col-container">
        <div id="content" class="inner">
          <article class="post">

  
    <div class="meta">
      
<div class="date">

<time datetime="2019-04-09T08:08:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  2019-04-09
</time>





</div>

    </div>
  
  <h1 class="title" itemprop="name">JSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-23-ç¦»çº¿åº”ç”¨ä¸å®¢æˆ·ç«¯å­˜å‚¨</h1>
  <div class="entry-content" itemprop="articleBody">
    
    <div class="post-toc">
      <div class="toc-title">TOC</div>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¦»çº¿æ£€æµ‹"><span class="toc-number">1.</span> <span class="toc-text">ç¦»çº¿æ£€æµ‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åº”ç”¨ç¼“å­˜"><span class="toc-number">2.</span> <span class="toc-text">åº”ç”¨ç¼“å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ•°æ®å­˜å‚¨"><span class="toc-number">3.</span> <span class="toc-text">æ•°æ®å­˜å‚¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie"><span class="toc-number">3.1.</span> <span class="toc-text">Cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IEç”¨æˆ·æ•°æ®"><span class="toc-number">3.2.</span> <span class="toc-text">IEç”¨æˆ·æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webå­˜å‚¨æœºåˆ¶"><span class="toc-number">3.3.</span> <span class="toc-text">Webå­˜å‚¨æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IndexDB-WebSQL"><span class="toc-number">3.4.</span> <span class="toc-text">IndexDB/WebSQL</span></a></li></ol></li></ol>
    </div>
    
    <p>ä¿æŒç¦»çº¿ Web åº”ç”¨å¼€å‘æ˜¯ HTML5 çš„å¦ä¸€ä¸ªé‡ç‚¹ã€‚æ‰€è°“ç¦»çº¿ Web åº”ç”¨ï¼Œå°±æ˜¯åœ¨è®¾å¤‡ä¸èƒ½ä¸Šç½‘çš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥è¿è¡Œçš„åº”ç”¨ã€‚</p>
<p>å¼€å‘ç¦»çº¿ Web åº”ç”¨éœ€è¦å‡ ä¸ªæ­¥éª¤ã€‚é¦–å…ˆæ˜¯ç¡®ä¿åº”ç”¨çŸ¥é“è®¾å¤‡æ˜¯å¦èƒ½ä¸Šç½‘ï¼Œä»¥ä¾¿ä¸‹ä¸€æ­¥æ‰§è¡Œæ­£ç¡®çš„æ“ä½œã€‚ç„¶åï¼Œåº”ç”¨è¿˜å¿…é¡»èƒ½è®¿é—®ä¸€å®šçš„èµ„æºï¼ˆå›¾åƒã€JavaScriptã€CSS ç­‰ï¼‰ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚æœ€åï¼Œå¿…é¡»æœ‰ä¸€å—æœ¬åœ°ç©ºé—´ç”¨äºä¿å­˜æ•°æ®ï¼Œæ— è®ºèƒ½å¦ä¸Šç½‘éƒ½ä¸å¦¨ç¢è¯»å†™ã€‚HTML5 åŠå…¶ç›¸å…³çš„ API è®©å¼€å‘ç¦»çº¿åº”ç”¨æˆä¸ºç°å®ã€‚</p>
<h2 id="ç¦»çº¿æ£€æµ‹"><a href="#ç¦»çº¿æ£€æµ‹" class="headerlink" title="ç¦»çº¿æ£€æµ‹"></a>ç¦»çº¿æ£€æµ‹</h2><p>HTML5æä¾›äº†è¿™ä¸ªAPIæ£€æµ‹è®¾å¤‡æ˜¯å¦ç¦»çº¿:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isOn = navigator.onLine;	<span class="comment">// true or false</span></span><br></pre></td></tr></table></figure>
<p>é™¤ navigator.onLine å±æ€§ä¹‹å¤–ï¼Œä¸ºäº†æ›´å¥½åœ°ç¡®å®šç½‘ç»œæ˜¯å¦å¯ç”¨ï¼ŒHTML5 è¿˜å®šä¹‰äº†ä¸¤ä¸ªäº‹ä»¶ï¼š<code>online</code> å’Œ <code>offline</code>ã€‚å½“ç½‘ç»œä»ç¦»çº¿å˜ä¸ºåœ¨çº¿æˆ–è€…ä»åœ¨çº¿å˜ä¸ºç¦»çº¿æ—¶ï¼Œåˆ†åˆ«è§¦å‘è¿™ä¸¤ä¸ªäº‹ä»¶ã€‚è¿™ä¸¤ä¸ªäº‹ä»¶åœ¨ window å¯¹è±¡ä¸Šè§¦å‘ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åªæœ‰ç½‘ç»œçŠ¶å†µå‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰ä¼šè§¦å‘ä»¥ä¸‹äº‹ä»¶</span></span><br><span class="line">windw.addEventListener(<span class="string">"online"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Online"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">windw.addEventListener(<span class="string">"offline"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Offline"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="åº”ç”¨ç¼“å­˜"><a href="#åº”ç”¨ç¼“å­˜" class="headerlink" title="åº”ç”¨ç¼“å­˜"></a>åº”ç”¨ç¼“å­˜</h2><p>çœ‹ <a href="http://www.w3school.com.cn/html5/html_5_app_cache.asp" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>èƒ½å¤Ÿæ›´æ¸…æ™°äº†è§£html5 appcache</p>
<h2 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h2><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookieæœ€åˆæ˜¯ç”¨æ¥åœ¨å®¢æˆ·ç«¯å‚¨å­˜ä¼šè¯ä¿¡æ¯çš„ã€‚è¯¥æ ‡å‡†è¦æ±‚æœåŠ¡å™¨å¯¹ä»»æ„HTTPè¯·æ±‚å‘é€Set-Cookie HTTPå¤´ä½œä¸ºç›¸åº”çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«ä¼šè¯çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-type: text/html</span><br><span class="line">Set-Cookie: name=value</span><br><span class="line">Other-header: other-header-value</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œå°±è®¾ç½®äº†ä¸€ä¸ªä»¥nameä¸ºåç§°ï¼Œvalueä¸ºå€¼çš„ä¸€ä¸ªcookieã€‚<br>æµè§ˆå™¨ä¼šå‚¨å­˜è¿™æ ·çš„ä¼šè¯ä¿¡æ¯ã€‚å¹¶åœ¨è¿™ä¹‹åé€šè¿‡ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚æ·»åŠ Cookie HTTPå¤´éƒ¨å°†ä¿¡æ¯å‘é€å›æœåŠ¡å™¨ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /index.html HTTP/1.1</span><br><span class="line">Cookie: name=value</span><br><span class="line">Other-header: other-header-value</span><br></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªä¿¡æ¯å¯¹äºæœåŠ¡å™¨æ¥è¯´å°±å¯ä»¥å”¯ä¸€éªŒè¯è¯·æ±‚çš„èº«ä»½</p>
<p><strong>é™åˆ¶</strong><br>cookieåœ¨æ€§è´¨ä¸Šæ˜¯ç»‘å®šåœ¨ç‰¹å®šåŸŸåä¸‹çš„ã€‚å½“è®¾å®šäº†ä¸€ä¸ªcookieï¼Œå†ç»™åˆ›å»ºå®ƒçš„åŸŸåå‘é€è¯·æ±‚æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªcookieï¼Œè€Œå‘å‘å…¶ä»–åŸŸçš„è¯·æ±‚ä¸­å¹¶ä¸ä¼šåŒ…å«è¿™ä¸ªcookieã€‚è¿™ä¸ªé™åˆ¶ä¿è¯äº†cookieåªèƒ½è®©æ‰¹å‡†çš„æ¥å—è€…è®¿é—®ã€‚<br>æ¯ä¸ªåŸŸçš„cookieæ€»æ•°æ˜¯æœ‰é™çš„ï¼Œå„æµè§ˆå™¨ä¸åŒï¼Œæœ€å°çš„è§„å®šä¸€ä¸ªåŸŸæœ‰30ä¸ªcookieï¼Œå¤§å°ä¸€èˆ¬ä¸è¶…è¿‡4095Bã€‚<br>cookieçš„æ„æˆ<br>cookieç”±æµè§ˆå™¨ä¿å­˜çš„ä¸€ä¸‹å‡ å—ä¿¡æ¯æ„æˆï¼š</p>
<ul>
<li>åç§°ï¼šä¸€ä¸ªå”¯ä¸€ç¡®å®šcookieçš„åç§°</li>
<li>å€¼ï¼šå‚¨å­˜åœ¨cookieä¸­çš„å­—ç¬¦ä¸²å€¼</li>
<li>åŸŸï¼šè¿™ä¸ªcookieå¯¹å“ªä¸ªåŸŸæœ‰æ•ˆï¼Œå¦‚æœè¿™ä¸ªåŸŸåŒ…å«å­åŸŸï¼Œé‚£å¯¹å­åŸŸåŒæ ·æœ‰æœ‰æ•ˆã€‚å¦‚æœè®¾å®šæ˜¯æ²¡æœ‰æ˜ç¡®æŒ‡å®šï¼Œè¿™ä¸ªå€¼ä¼šè¢«è®¤ä¸ºæ˜¯è®¾ç½®cookieçš„é‚£ä¸ªåŸŸ</li>
<li>è·¯å¾„ï¼šç”¨äºæŒ‡å®šå‘åŸŸä¸­çš„å“ªä¸ªè·¯å¾„å‘é€cookieï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥æŒ‡å®šcookieåªå‘é€åˆ°<a href="http://www.baidu.com/imgï¼Œé‚£å†è®¿é—®www.baidu.comæ—¶å°±ä¸ä¼šå‘é€cookieã€‚åŠæ—¶å®ƒä»¬åŒåŸŸ" target="_blank" rel="noopener">www.baidu.com/imgï¼Œé‚£å†è®¿é—®www.baidu.comæ—¶å°±ä¸ä¼šå‘é€cookieã€‚åŠæ—¶å®ƒä»¬åŒåŸŸ</a></li>
<li>å¤±æ•ˆæ—¶é—´ï¼šcookieåº”è¯¥è¢«åˆ é™¤çš„æ—¶é—´æˆ³ï¼Œé»˜è®¤æµè§ˆå™¨ä¼šè¯ç»“æŸå°±åˆ é™¤</li>
<li>å®‰å…¨æ ‡å¿—ï¼šæŒ‡å®šåï¼Œcookieåªæœ‰åœ¨ä½¿ç”¨SSLè¿æ¥æ—¶æ‰ä¼šå‘é€åˆ°æœåŠ¡å™¨</li>
</ul>
<p>çœ‹ä¾‹å­:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-type: text/html</span><br><span class="line">Set-Cookie: name=value; expires=Mon, 22-Jan-07 07:10:24 GMT; domain=.wrox.com path=/; secure</span><br><span class="line">Other-header: other-header-value</span><br></pre></td></tr></table></figure></p>
<p><strong>JSä¸­çš„cookie</strong><br>å¯ä»¥é€šè¿‡document.cookieè¿”å›å¦‚ä¸‹æ ¼å¼çš„å­—ç¬¦ä¸²:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">document.cookie;	//name1=value1;name2=value2;name3=value3</span><br></pre></td></tr></table></figure></p>
<p>jsä¸­è®¾ç½®åˆ é™¤cookieä¸æ˜¯å¾ˆå¥½æ“ä½œ, æˆ‘ç»™å‡ºä¸€ä¸ªå°è£…å¥½çš„demo:<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> CookieUtil = &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cookieName = <span class="built_in">encodeURIComponent</span>(name) + <span class="string">"="</span>,</span><br><span class="line">      cookieStart = <span class="built_in">document</span>.cookie.indexOf(cookieName),</span><br><span class="line">      cookieValue = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (cookieStart &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">      <span class="keyword">var</span> cookieEnd = <span class="built_in">document</span>.cookie.indexOf(<span class="string">";"</span>, cookieStart);</span><br><span class="line">      <span class="keyword">if</span> (cookieEnd == <span class="number">-1</span>)&#123;</span><br><span class="line">        cookieEnd = <span class="built_in">document</span>.cookie.length;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      cookieValue = <span class="built_in">decodeURIComponent</span>(<span class="built_in">document</span>.cookie.substring(cookieStart + cookieName.length, cookieEnd));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cookieValue;</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span> (<span class="params">name, value, expires, path, domain, secure</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cookieText = <span class="built_in">encodeURIComponent</span>(name) + <span class="string">"="</span> +</span><br><span class="line">      <span class="built_in">encodeURIComponent</span>(value);</span><br><span class="line">    <span class="keyword">if</span> (expires <span class="keyword">instanceof</span> <span class="built_in">Date</span>) &#123;</span><br><span class="line">      cookieText += <span class="string">"; expires="</span> + expires.toGMTString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (path) &#123;</span><br><span class="line">      cookieText += <span class="string">"; path="</span> + path;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (domain) &#123;</span><br><span class="line">      cookieText += <span class="string">"; domain="</span> + domain;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (secure) &#123;</span><br><span class="line">      cookieText += <span class="string">"; secure"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.cookie = cookieText;</span><br><span class="line">  &#125;,</span><br><span class="line">  unset: <span class="function"><span class="keyword">function</span> (<span class="params">name, path, domain, secure</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.set(name, <span class="string">""</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">0</span>), path, domain, secure);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">CookieUtil.set(<span class="string">"book"</span>, <span class="string">"Professional JavaScript"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(CookieUtil.get(<span class="string">"book"</span>));</span><br><span class="line">CookieUtil.unset(<span class="string">"book"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(CookieUtil.get(<span class="string">"book"</span>));</span><br></pre></td></tr></table></figure></p>
<p><strong>å­Cookie</strong><br>å­Cookieæ–¹æ¡ˆçš„æå‡ºå®é™…ä¸Šæ˜¯ä¸ºäº†é¿å…å•åŸŸåå¯¹cookieä¸ªæ•°çš„é™åˆ¶, å®ƒçš„æ€æƒ³å°±æ˜¯åœ¨å•ä¸ªcookieä¸­å­˜æ›´å¤šçš„åå€¼å¯¹, ä¸è¿‡å†™è¿™ä¸ªç¬”è®°çš„æ—¶å€™, å¸‚åœºä¸Šçš„ä¸»æµæ˜¯ç°ä»£æµè§ˆå™¨(è°·æ­Œå†…æ ¸), æ²¡æœ‰å•åŸŸåcookieä¸ªæ•°é™åˆ¶, è¿™é‡Œä¸å†è®²è§£.</p>
<p><strong>å…³äºCookieçš„ä¸€äº›è¯´æ˜</strong></p>
<ul>
<li>cookieå­˜å‚¨çš„æ•°æ®ä¸å®œè¿‡å¤š: ä¿¡æ¯è¶Šå¤š, åç«¯å“åº”è¶Šæ…¢</li>
<li>ä¸è¦å­˜æ•æ„Ÿä¿¡æ¯, å¦åˆ™XSSæ³„éœ²éº»çƒ¦</li>
</ul>
<h3 id="IEç”¨æˆ·æ•°æ®"><a href="#IEç”¨æˆ·æ•°æ®" class="headerlink" title="IEç”¨æˆ·æ•°æ®"></a>IEç”¨æˆ·æ•°æ®</h3><p>ç•¥, ä¸è¦ç”¨</p>
<h3 id="Webå­˜å‚¨æœºåˆ¶"><a href="#Webå­˜å‚¨æœºåˆ¶" class="headerlink" title="Webå­˜å‚¨æœºåˆ¶"></a>Webå­˜å‚¨æœºåˆ¶</h3><p>ç›®å‰æ¥è¯´ä¸»è¦æ˜¯localStorageå’ŒsessionStorage. ä¹¦ä¸­æœ‰äº›å†…å®¹ä»¥åŠä¸é€‚åˆç°åœ¨, çœ‹ <a href="http://www.w3school.com.cn/html5/html_5_webstorage.asp" target="_blank" rel="noopener">è¿™ä¸ªä¾‹å­</a>æ›´ç®€æ´ </p>
<h3 id="IndexDB-WebSQL"><a href="#IndexDB-WebSQL" class="headerlink" title="IndexDB/WebSQL"></a>IndexDB/WebSQL</h3><p>ä¹¦ä¸Šåªä»‹ç»äº†indexDB , æˆ‘ä»¬çœ‹ <a href="https://sdk.cn/news/7107" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a> , æ›´åŠ ç›´è§‚ä»‹ç»ä¸¤ç§æ–¹æ¡ˆ.</p>

  </div>

</article>


  <nav id="pagenavi">
    
    <a href="/2019/04/09/JSbook24/" class="prev">ä¸Šä¸€ç¯‡ï¼šJSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-24-æœ€ä½³å®è·µ</a>
    
    
    <a href="/2019/04/09/JSbook22/" class="next">ä¸‹ä¸€ç¯‡ï¼šJSçº¢çš®ä¹¦è¯»ä¹¦ç¬”è®°-22-é«˜çº§æŠ€å·§</a>
    
  </nav>

        </div>
        
        
          <div class="post-comments" id="Jcmt">
            <h1 class="post-comments-title">è®¿å®¢è¯„è®º</h1>
            <div id="Jcomment"></div>
          </div>
        
      </div>
      <footer id="footer" class="inner">
        Â© 2021 - æµ‹è¯•ç‹— -
        <span id="busuanzi_container_site_pv">PV <span id="busuanzi_value_site_pv"></span></span>
        <p>Powered by <a href="https://hexo.io/">Hexo</a> & <a href="https://github.com/thinkerchan/hexo-theme-greyshade">GreyShade</a></p>
      </footer>
    </div>
  </div>
  
  <script>
    let mod ={
      timePrefix:'t-',
      expire:1000*60*60,
      load:function(libName,libUrl,cb){
        let aval = (new Date).getTime() - localStorage.getItem(this.timePrefix+libName) < this.expire;
        let libStr = localStorage.getItem(libName)
        if (aval && libStr) {
          this.parseAndInsert(libStr)
          cb && cb(libStr);
        }else{
          this.ajax(libUrl,(str)=>{
            localStorage.setItem(libName, str)
            localStorage.setItem(this.timePrefix+libName, (new Date).getTime())
            this.parseAndInsert(str)
            cb && cb(str);
          })
        }
      },
      parseAndInsert(rawStr) {
        let script = document.createElement('script')
        script.innerHTML = rawStr
        document.body.appendChild(script)
      },
      ajax:function(url,cb){
        let xhr = new XMLHttpRequest;
        xhr.open('get', url, true)
        xhr.send();
        xhr.onreadystatechange = function () {
          if (xhr.readyState == 4 && xhr.status == 200) {
            cb && cb(xhr.responseText)
          }else{
            // console.log(xhr.readyState,xhr.status);
          }
        }
      },
      genCmt(){
        window.Valine && new Valine({
          el: '#Jcomment',
          appId: 'XPJzs0FfufkFfuBjbJraqhbo-gzGzoHsz',
          appKey: 'QoS0zL4Y2xTDviitGOPkvCGv',
          notify: true,
          verify: false,
          avatar: 'mm',
          pageSize: '10',
          placeholder: 'Valine+Leancloudæä¾›è¯„è®º'
        })
      }
    }

    mod.load('lib-av', 'https://cdn.jsdelivr.net/npm/leancloud-storage@3.0.1/dist/av-min.js', () => {
      mod.load('lib-cmt', 'https://unpkg.com/valine@1.4.14/dist/Valine.min.js',()=>{
        let t = setTimeout(() => {
          mod.genCmt()
          clearTimeout(t)
          t = null;
        }, 100);
      })
    })
  </script>
  
  <script async defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
  <script async defer src="https://s5.cnzz.com/z_stat.php?id=1276809529&web_id=1276809529"></script>
  
</body>
</html>